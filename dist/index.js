"use strict";var m=Object.create;var u=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var O=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t)=>{for(var n in t)u(e,n,{get:t[n],enumerable:!0})},g=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of y(t))!S.call(e,i)&&i!==n&&u(e,i,{get:()=>t[i],enumerable:!(r=f(t,i))||r.enumerable});return e};var C=(e,t,n)=>(n=e!=null?m(b(e)):{},g(t||!e||!e.__esModule?u(n,"default",{value:e,enumerable:!0}):n,e)),E=e=>g(u({},"__esModule",{value:!0}),e);var P=(e,t,n)=>(O(e,typeof t!="symbol"?t+"":t,n),n);var k={};v(k,{CapacitorFirebaseAuth:()=>h,link:()=>A,signIn:()=>M,signOut:()=>D});module.exports=E(k);var o=C(require("firebase/compat/app")),_=require("firebase/auth"),R=require("@capacitor/core");var h=(0,R.registerPlugin)("CapacitorFirebaseAuth",{web:async()=>({signIn:async()=>{throw new Error("web not implemented")},link:async()=>{throw new Error("web not implemented")},signOut:async()=>{throw new Error("web not implemented")}})}),p=h;var I=class extends o.default.auth.OAuthProvider{constructor(){super(I.PROVIDER_ID)}},d=I;P(d,"PROVIDER_ID","apple.com");var l=(e,t)=>({providerId:e.PROVIDER_ID,Provider:e,buildCredential:t}),w={["google.com"]:l(o.default.auth.GoogleAuthProvider,({idToken:e},t)=>t.credential(e)),["apple.com"]:l(d,({idToken:e,rawNonce:t},n)=>{let r=new n;return r.addScope("email"),r.addScope("name"),r.credential({idToken:e,rawNonce:t})}),["facebook.com"]:l(o.default.auth.FacebookAuthProvider,({idToken:e},t)=>t.credential(e)),["twitter.com"]:l(o.default.auth.TwitterAuthProvider,({idToken:e,secret:t},n)=>n.credential(e,t)),phone:l(o.default.auth.PhoneAuthProvider,({verificationId:e,verificationCode:t},n)=>t?n.credential(e,t):null)},M=async(e,...[t])=>{let n=w[e];if(!n)throw new Error(`Provider ${e} not found`);let{Provider:r,buildCredential:i}=n,a=await p.signIn({providerId:e,data:t}),s=await i(a,r);return s?{userCredential:await o.default.app().auth().signInWithCredential(s),result:a}:null},A=async(e,...[t])=>{let n=w[e];if(!n)throw new Error(`Provider ${e} not found`);let{Provider:r,buildCredential:i}=n,a=await p.link({providerId:e,data:t}),s=await i(a,r);if(!s)return null;let c=o.default.app().auth().currentUser;if(!c)throw new Error("No user to link to");return{userCredential:await c.linkWithCredential(s),result:a}},D=async()=>{await p.signOut({}),await o.default.app().auth().signOut()};0&&(module.exports={CapacitorFirebaseAuth,link,signIn,signOut});
//# sourceMappingURL=index.js.map