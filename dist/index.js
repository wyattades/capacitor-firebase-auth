"use strict";var u=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var f=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t)=>{for(var n in t)u(e,n,{get:t[n],enumerable:!0})},b=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m(t))!y.call(e,i)&&i!==n&&u(e,i,{get:()=>t[i],enumerable:!(o=h(t,i))||o.enumerable});return e};var v=e=>b(u({},"__esModule",{value:!0}),e);var g=(e,t,n)=>(f(e,typeof t!="symbol"?t+"":t,n),n);var E={};S(E,{CapacitorFirebaseAuth:()=>R,link:()=>A,signIn:()=>O,signOut:()=>C});module.exports=v(E);var P=require("@capacitor/core"),r=require("firebase/auth");var R=(0,P.registerPlugin)("CapacitorFirebaseAuth",{web:async()=>({signIn:async()=>{throw new Error("web not implemented")},link:async()=>{throw new Error("web not implemented")},signOut:async()=>{throw new Error("web not implemented")}})}),p=R;var I=class extends r.OAuthProvider{constructor(){super(I.PROVIDER_ID)}},d=I;g(d,"PROVIDER_ID","apple.com");var l=(e,t)=>({providerId:e.PROVIDER_ID,Provider:e,buildCredential:t}),w={["google.com"]:l(r.GoogleAuthProvider,({idToken:e},t)=>t.credential(e)),["apple.com"]:l(d,({idToken:e,rawNonce:t},n)=>{let o=new n;return o.addScope("email"),o.addScope("name"),o.credential({idToken:e,rawNonce:t})}),["facebook.com"]:l(r.FacebookAuthProvider,({idToken:e},t)=>t.credential(e)),["twitter.com"]:l(r.TwitterAuthProvider,({idToken:e,secret:t},n)=>n.credential(e,t)),phone:l(r.PhoneAuthProvider,({verificationId:e,verificationCode:t},n)=>t?n.credential(e,t):null)},O=async(e,...[t])=>{let n=w[e];if(!n)throw new Error(`Provider ${e} not found`);let{Provider:o,buildCredential:i}=n,s=await p.signIn({providerId:e,data:t}),a=await i(s,o);return a?{userCredential:await(0,r.signInWithCredential)((0,r.getAuth)(),a),result:s}:null},A=async(e,...[t])=>{let n=w[e];if(!n)throw new Error(`Provider ${e} not found`);let{Provider:o,buildCredential:i}=n,s=await p.link({providerId:e,data:t}),a=await i(s,o);if(!a)return null;let c=(0,r.getAuth)().currentUser;if(!c)throw new Error("No user to link to");return{userCredential:await(0,r.linkWithCredential)(c,a),result:s}},C=async()=>{await p.signOut({}),await(0,r.getAuth)().signOut()};0&&(module.exports={CapacitorFirebaseAuth,link,signIn,signOut});
//# sourceMappingURL=index.js.map